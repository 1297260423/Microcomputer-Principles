# 中断控制器8259A

- 8259A用于**管理和控制外部中断请求，实现中断优先级判定，提供中断类型号，屏蔽中断输入**等功能。

- 另外，它还负责**为CPU处理中断提供中断类型号**。8259A的内部主要包括实现功能的部件：

  

  中断请求寄存器IRR
  
  中断优先权判别器PR
  
  中断服务寄存器ISR
  
  中断屏蔽寄存器IMR
  
  实现级联的部件：级联缓冲/比较器CAS；一个主片最多级联8个从片，主片IR引脚连接到从片的INT引脚，最多管理64个中断向量
  
  实现工作方式控制的部件；读写控制逻辑等。

<img src=".\image\8259A.png" alt="8259A" style="zoom:80%;" />

## 8259A的中断响应过程

1. 有一条或若干条中断请求输入线（IR7-lR0)变为高电平时（即有一个和多个相应设备发出中断请求）， 8259内部中断请求寄存器IRR的相应位置1
2. 用中断屏蔽寄存器(IMR)对IRR进行屏蔽，通过优先权判别电路（PR），将当前未屏蔽的各中断源的中 断优先级别进行比较判别，从中选出优先级别最高的中断请求，并使INT输出有效信号，送至CPU的INTR端。
3. CPU在收到8259发来的中断请求信号INT后，如果当前指令执行完且中断允许标志位IF=1，则CPU向8259发来INTA#信号，进入中断响应周期。
4. 8259收到CPU的第1个INTA#信号时，ISR（中断服务寄存器）中当前优先级别最高的中断请求所对应的位置1，IRR的相应位清0
5. 8259收到CPU发出的第2个INTA#信号后，通过数据线将对应的中断类型码n送至CPU。CPU根据读入的中断类型码，在中断向量表中找到相应的中断服务程序入口地址，继而转去执行中断服务程序。如果8259工作在自动中断结束方式下，则在第2个 INTA#脉冲信号结束时，使被响应的中断源在ISR中 的对应位清0，否则，当中断服务结束时，由安排的 8259中断结束命令EOI使ISR的相应位复位。

## 8259A的中断优先级

1. **固定优先级方式**

   在固定优先级方式中，IR7～IR0 的中断优先级是由系统确定的。优先级由高到低的顺序是：IR0, IR1, IR2, …, IR7。其中，IR0的优先级最高，IR7的优先级最低。当有多个IRi请求时，优先权判决器（PR）将它们与当前正在处理的中断源的优先权进行比较，选出当前优先权最高的IRi，向CPU发出中断请求INT，请求为其服务。

2. 

